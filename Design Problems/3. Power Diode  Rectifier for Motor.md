# âš¡ Power Rectifier Design Problem & Complete Step-by-Step Solution

**Prepared By:** HK Roni Sir

---

## 1. Problem Statement

ðŸ”§ **Design task:** Design a single-phase full-wave bridge rectifier with a capacitor-input filter to power a DC load for an industrial control module. The converter should supply a nearly constant DC voltage to a resistive load while meeting ripple and current requirements.

**Given / Required:**

* Input supply: 230 V, 50 Hz (mains), single-phase.
* Required DC output (approximate, unloaded): 160 VDC (after filter) under rated load.
* Load: Resistive load drawing I_DC = 2 A under nominal DC output.
* Maximum allowable peak-to-peak ripple voltage on the DC bus: Î”V_pp â‰¤ 6 V.
* Maximum diode reverse voltage margin: 20% safety margin.
* Design must specify transformer turns ratio, diode selection (rating), filter capacitor value, and expected performance parameters (V_DC, V_ripple, I_ripple, P_loss approx.).

**Assumptions (practical):**

* Transformer ideal except for rated turns ratio (small losses ignored for hand design).
* Diode forward drop (per diode in conduction): V_D â‰ˆ 1.0 V (choose silicon power diodes like 1N540x / MUR series; exact pick later).
* Capacitor is ideal (ESR ignored for first-order sizing); later comment on ESR effects.
* Ripple treated with discharge between charging pulses from the bridge output at twice mains frequency (i.e., 100 Hz charging for 50 Hz mains).

---

## 2. Definitions & Physical Significance

* **V_peak (V_m):** Peak of the transformer's secondary sinusoidal waveform. V_m = V_secondary_rms * sqrt(2).
* **V_DC (no-load, capacitor-input approx):** Approximate average DC after the filter = V_m - 2*V_D (bridge has two diode drops during conduction).
* **Î”V_pp (ripple p-p):** Peak-to-peak variation of DC due to capacitor discharge between charging pulses.
* **I_DC:** Average DC current delivered to the load.
* **f_charge:** Charging repetition frequency for full-wave bridge = 2 * f_mains (100 Hz here).
* **C (filter):** Capacitance chosen to limit Î”V_pp for given I_DC and f_charge using: Î”V_pp = I_DC / (C * f_charge).
* **P_loss (diode heating):** Approximate conduction loss in diodes: P_loss â‰ˆ I_avg_through_diode * V_D (requires considering conduction intervals). For rough design, estimate P_loss â‰ˆ 2 * I_DC * V_D / conduction_factor.

Physical significance: The capacitor stores energy during the short conduction pulses (near peaks) and supplies the load in between; ripple is the net voltage fall during discharge. Larger C -> smaller ripple but bigger inrush and size/cost.

---

## 3. Design Steps â€” Outline

1. Choose transformer secondary RMS voltage (V_sec_rms) so that after bridge drops the DC level is ~160 V under load.
2. Calculate peak secondary V_m.
3. Account for diode drops (bridge has two series diodes when conducting).
4. Estimate V_DC (average) and confirm margin for load/regulation.
5. Compute required filter capacitor C to keep Î”V_pp â‰¤ 6 V for I_DC = 2 A and f_charge = 100 Hz.
6. Select diodes with appropriate Peak Reverse Voltage (PRV) and average current rating with safety margins.
7. Estimate transformer rating (VA), winding currents, and check thermal/ESR/practical notes.
8. Present summary table and practical selection notes.

---

## 4. Numerical Design â€” Step-by-step

### Step 1 â€” Choose secondary RMS voltage

We want V_DC â‰ˆ 160 V after filtering. For a capacitor-input filter, approximate:

* V_m = V_secondary_rms * sqrt(2)
* V_DC â‰ˆ V_m - 2*V_D

Rearrange to find V_secondary_rms target:

* Target V_m â‰ˆ V_DC + 2*V_D
* With V_D â‰ˆ 1.0 V (per diode), 2*V_D = 2 V.

So V_m_target â‰ˆ 160 + 2 = 162 V.

Thus V_secondary_rms_target = V_m_target / sqrt(2)

* sqrt(2) â‰ˆ 1.4142

Calculate numerically:

* V_secondary_rms_target = 162 / 1.4142 = 114.6 V (approx)

Choose a standard transformer secondary: **115 V RMS** (practical standard). âœ…

**Check:** With V_secondary_rms = 115 V:

* V_m = 115 * 1.4142 = 162.6 V
* V_DC â‰ˆ 162.6 - 2 = 160.6 V â†’ meets 160 V target.

### Step 2 â€” Charging frequency

* f_mains = 50 Hz â†’ f_charge = 2 * 50 = 100 Hz.

### Step 3 â€” Capacitor sizing

Use Î”V_pp = I_DC / (C * f_charge).

Rearrange: C = I_DC / (Î”V_pp * f_charge).

Given: I_DC = 2 A, Î”V_pp_max = 6 V, f_charge = 100 Hz.

* C = 2 / (6 * 100) = 2 / 600 = 0.003333... F = 3333.3 Î¼F.

Choose a standard capacitor value with margin: **C = 4700 Î¼F, 200 V rating** (voltage rating chosen with margin above expected peak ~ 163 V).

**Reasoning:** 4700 Î¼F gives smaller ripple than required and provides some margin for ESR and aging.

Estimate actual ripple with 4700 Î¼F:

* Î”V_pp_actual = I_DC / (C * f_charge) = 2 / (4700e-6 * 100) = 2 / 0.47 = 4.255 V (approx)

So actual ripple â‰ˆ 4.26 V_pp, comfortably â‰¤ 6 V.

### Step 4 â€” Compute DC average and RMS values

* Peak secondary V_m = 115 * 1.4142 = 162.63 V.
* DC after diode drops V_DC â‰ˆ V_m - 2*V_D = 162.63 - 2 = 160.63 V.
* Under load with ripple, the mean will be ~160.6 V; capacitor reduces harmonic content.

**Transformer secondary RMS current (approx):** The DC load current is 2 A. For a capacitor-input filter, the transformer secondary supplies pulses of current; the RMS secondary current is higher than DC. A rough estimate for design VA:

* Required DC power P_DC = V_DC * I_DC = 160.63 * 2 = 321.26 W.

Allow for rectifier and transformer losses, choose transformer VA = P_DC * safety_factor (1.25~1.5). Choose safety factor 1.3.

* Transformer VA â‰ˆ 321.26 * 1.3 = 417.6 VA â†’ round to **500 VA**, 115 V secondary.

Secondary rated RMS current for 500 VA, 115 V: I_sec_rms = 500 / 115 = 4.35 A.

This gives margin because pulses increase heating â€” selecting 500 VA is a safe conservative practical choice.

### Step 5 â€” Diode selection (ratings)

**Peak inverse voltage (PIV) need:** For a bridge diode, each diode must withstand approximately the peak of the opposite half-cycle minus some small amount.

* V_PIV_min â‰ˆ V_m (162.6 V). With 20% margin: V_PIV_spec = V_m * 1.2 = 162.6 * 1.2 = 195.1 V.

Choose a standard diode reverse voltage rating **â‰¥ 200 V**. Common choice: **400 V PRV diodes** (e.g., 1N5408 is 1000 V? Actually 1N5408 is 1000 V? â€” check datasheet for chosen part; for hand-design pick **400 V** rated power diodes or **600 V** if using server-grade diodes). For safety choose **400 V** or **600 V** as standard.

**Average/continuous current rating:** DC average current per diode in bridge is about I_DC / conduction duty distribution. For safety, choose diodes rated for at least **5 A** continuous (e.g., 6 A or 10 A devices) and with suitable surge rating (IFSM) to handle inrush charging of C.

Practical candidate: **MUR460** (4 A, 600 V, ultrafast) or **1N5408** (3 A, 1000 V â€” but note 1N5408 is slow). Better choose modern Schottky/ultrafast diodes with 6 A rating: **STTH6L06** (6 A, 600 V ultrafast) or **KBPC bridge module** rated for 25 A if modular approach.

**Sensible selection for this design:** Four discrete diodes type **STTH6L06 (6 A, 600 V)** or a bridge module **KBPC5010 (50 A, 1000 V)** if wanting extra margin (but overkill). For a compact, low-cost design: **4 Ã— 6 A, 400â€“600 V ultrafast diodes.**

### Step 6 â€” Verify capacitor voltage rating

* Peak on capacitor â‰ˆ V_m - 2*V_D â‰ˆ 160.6 V.
* Add margin for spikes and safety: choose capacitor rated **200 VDC** (commonly available as 200 V electrolytic). If 200 V is not easily available choose 250 V for better margin.

### Step 7 â€” Estimate ripple current and ESR effects

* Capacitor ripple current ~ I_DC but charging pulses produce higher RMS ripple current; choose capacitor with adequate ripple current rating (e.g., â‰¥ 5 A ripple rating) and low ESR to keep heating low.

### Step 8 â€” Estimate diode conduction loss (rough)

Each conduction path in bridge has two diodes conducting in series. For DC current I_DC = 2 A and V_D â‰ˆ 1.0 V: instantaneous conduction loss in the two diodes combined ~ 2 * V_D * I_D = 2 * 1 * 2 = 4 W when conduction occurs. Because conduction happens in pulses, average total diode loss might be slightly less; conservative estimate: **P_diode_total â‰ˆ 4 W**. Each diode therefore dissipates ~2 W on average split between conducting periods (depends on conduction angle). Check datasheet for thermal limits and heat-sinking.

### Step 9 â€” Final component choices (summary)

| Item                        | Calculated / Required | Practical selection (recommended)                                  |
| --------------------------- | --------------------: | ------------------------------------------------------------------ |
| Transformer secondary (RMS) |                 115 V | 115 V RMS secondary, 500 VA rated transformer                      |
| Peak secondary (V_m)        |               162.6 V | â€”                                                                  |
| DC output (V_DC)            |              ~160.6 V | Target 160 V DC (nominal)                                          |
| Load current (I_DC)         |                   2 A | â€”                                                                  |
| Filter capacitor (C)        |        3333 Î¼F (calc) | 4700 Î¼F, 200â€“250 V electrolytic (low ESR)                          |
| Ripple (Î”V_pp)              |           â‰¤ 6 V (req) | â‰ˆ 4.26 V with 4700 Î¼F                                              |
| Diode PRV                   |        â‰¥ 195 V (calc) | 600 V, 6 A ultrafast diodes (STTH6L06 or similar) or bridge module |
| Transformer VA              |         418 VA (calc) | 500 VA, 115 V secondary                                            |

---

## 5. Practical Notes & Physical Considerations

* **Surge/inrush:** When charging a discharged capacitor, initial charging current pulses can be very large. Use NTC inrush limiter or soft-start, and ensure diodes and transformer can handle IFSM (non-repetitive surge current). Verify diode IFSM rating vs expected inrush.
* **ESR and heating of capacitor:** ESR causes ripple heating. Use capacitor with low ESR and rated ripple current â‰¥ expected ripple current (choose â‰¥ 5â€“10 A rating for safety depending on part). Consider paralleling capacitors to reduce ESR and increase ripple current capacity.
* **EMI & filtering:** Fast charging pulses cause harmonics on the AC side. Add an input choke or EMI filter if needed for conducted EMI compliance.
* **Transformer regulation:** Under load, transformer secondary will droop; use stronger transformer (lower regulation percentage) if precise DC voltage is needed.
* **Heatsinking:** Diodes should be mounted on an appropriate heatsink if continuous dissipation is > 1â€“2 W per diode depending on ambient.
* **Voltage rating margins:** Use capacitor voltage rating â‰¥ 1.25 Ã— V_peak (we chose 200â€“250 V for ~160 V DC). For diodes use PRV â‰¥ 2 Ã— V_DC if possible, but practical 400â€“600 V is common for 230 VAC designs.

---

## 6. Quick Worked Summary (Numerical snapshot)

* V_in = 230 V (mains) â€” step down to 115 V RMS secondary
* V_m = 115 * 1.4142 = 162.63 V
* V_DC â‰ˆ 162.63 - 2 * 1 = 160.63 V
* I_DC = 2 A, P_DC â‰ˆ 321.3 W
* Choose transformer 500 VA, 115 V secondary (I_sec_rms â‰ˆ 4.35 A)
* C_req = I_DC / (Î”V_pp * f_charge) = 2 / (6 * 100) = 3333 Î¼F â†’ choose 4700 Î¼F, 200â€“250 V
* Î”V_pp_actual = 2 / (4700e-6 * 100) â‰ˆ 4.26 V
* Diodes: 4 Ã— 6 A, 600 V ultrafast diodes (or equivalent bridge module)

---

## 7. Example Circuit Diagram (textual)

* Step-down transformer: 230 V primary â€” 115 V secondary, center: none (simple). Secondary -> Bridge (4 diodes) -> Filter capacitor (4700 Î¼F, 200 V) -> Load (R = V_DC / I_DC â‰ˆ 160.6 / 2 = 80.3 Î©). Add bleeder resistor if desired to discharge capacitor on power-off.

**Load resistor (approx):** R_load = V_DC / I_DC â‰ˆ 160.6 / 2 â‰ˆ 80.3 Î© â†’ choose standard 82 Î©, power rating 50 W (since P = V^2 / R â‰ˆ 321 W â€” pick adequate rating or use distributed loads). In practice use a proper load module.

---

## 8. Compact Design Checklist (for prototyping)

* [ ] Transformer: 115 V secondary, 500 VA, thermally rated.
* [ ] Bridge diodes: 4 Ã— STTH6L06 (6 A, 600 V) or equivalent; heatsink if needed.
* [ ] Filter capacitor: 4700 Î¼F, 200â€“250 V, low ESR.
* [ ] Bleeder resistor: e.g., 470 kÎ© / 2 W to discharge capacitor slowly (optional, choose safe value).
* [ ] Input fuse and slow-start / NTC inrush limiter.
* [ ] EMI filter / common mode choke if needed.
* [ ] Thermal management and clearance for safety.

---

## 9. Practice Quiz (Objective Viva Questions â“)

1. **(a)** For a single-phase full-wave bridge supplied from 50 Hz mains, what is the frequency of capacitor charging pulses?

   * (a) 25 Hz  (b) 50 Hz  (c) 100 Hz  (d) 150 Hz

2. **(b)** If the secondary RMS is 115 V, what is the peak V_m (use sqrt(2)=1.4142)?

   * (a) 115 V  (b) 162.6 V  (c) 230 V  (d) 100 V

3. **(c)** Using Î”V_pp = I / (C * f), what capacitor (approx) is needed to limit Î”V_pp to 5 V for I=2 A and f=100 Hz?

   * (a) 4000 Î¼F  (b) 2000 Î¼F  (c) 1000 Î¼F  (d) 5000 Î¼F

4. **(d)** In a bridge rectifier the DC output level (approx) is V_m minus diode drops. For two series diodes each ~1.0 V, what is approximate V_DC if V_m = 162.6 V?

   * (a) 160.6 V  (b) 162.6 V  (c) 161.6 V  (d) 158.6 V

5. **(e)** If required DC power is 320 W and transformer efficiency/regulation margin is 1.3, what VA transformer rating is appropriate?

   * (a) 320 VA  (b) 416 VA  (c) 500 VA  (d) 250 VA

## 10. Solutions to Viva Questions âœ…

1. Answer: **(c) 100 Hz**. Explanation: Full-wave bridge charges on both peaks each mains cycle â†’ twice mains frequency.

2. Answer: **(b) 162.6 V**. Explanation: V_m = 115 * 1.4142 â‰ˆ 162.6 V.

3. Answer: **(a) 4000 Î¼F (closest to calculation)**. Calculation: C = 2 / (5 * 100) = 2 / 500 = 0.004 F = 4000 Î¼F.

4. Answer: **(a) 160.6 V**. Explanation: V_DC â‰ˆ V_m - 2*V_D = 162.6 - 2 = 160.6 V.

5. Answer: **(b) 416 VA (closest calculation) â€” choose practical 500 VA**. Explanation: 320 * 1.3 = 416 VA; choose next standard or safe rating (500 VA recommended).

---

## 11. Additional Practical Example (if load changes)

If the load increases to 3 A, recalculation quick:

* P_DC_new â‰ˆ 160.6 * 3 = 481.8 W
* Transformer VA (1.3 factor) â‰ˆ 626.3 VA â†’ choose 750 VA
* C required for Î”V_pp â‰¤ 6 V: C = 3 / (6 * 100) = 5000 Î¼F â†’ pick 6800 Î¼F, 250 V
* Diode current rating: pick 10 A diodes or bridge module.

Physical significance: larger load increases charging pulse amplitude and stress on transformer, diodes, and capacitor. Design must scale all components accordingly.

---

## 12. Closing Practical Tips

* Use measured values when possible: mount a voltmeter and oscilloscope to check ripple and peak voltages before connecting sensitive loads.
* Consider slow-start or pre-charge resistor to limit capacitor charging inrush.
* In production, account for component tolerances, aging (capacitance drops), and operating temperature.

---
---

# Simulink step-by-step guide â€” full workflow (Simscape / Specialized Power Systems)

> **Goal:** Simulate the 230V â†’ 115V single-phase bridge rectifier with C = 4700 Î¼F and load I_DC â‰ˆ 2 A, and verify:
>
> * V_DC â‰ˆ 160.6 V
> * Î”V_pp â‰¤ 6 V (expect â‰ˆ 4.3 V)
> * Load current â‰ˆ 2 A

---

## 0) Required toolboxes

Use **MATLAB + Simulink** with **Simscape Electrical** / **Specialized Power Systems** (Simscape Electrical). If you only have basic Simulink, you can build an idealized model using sources + diodes + integrator, but recommended: Simscape Electrical.

---

## 1) New model + basic settings

1. Open Simulink, create a new model.
2. Drag a **Powergui** block (Simscape Electrical â†’ Specialized Power Systems â†’ Tools) into the model â€” required for power systems analysis.
3. Set **Simulation time** to `0.2` s (two mains cycles are 0.04 s; 0.2 s ensures steady state).
4. Solver: In `Simulation` â†’ `Model Configuration Parameters`:

   * Solver type: **ode23tb** or **ode15s** (stiff ODE solver recommended for power electronics).
   * Max step size: choose `1e-5` s (0.00001 s) to capture the short charging pulses accurately. If simulation is slow, use `1e-4` but validate accuracy.
   * Stop time: `0.2`

---

## 2) Blocks to place (library names + purpose)

Use the following blocks (Simscape Electrical / Specialized Power Systems):

* **AC Voltage Source** (Sources) â€” to represent mains 230 V, 50 Hz.
* **Ideal Transformer** (Fundamental Blocks â†’ Transformers) â€” to step down to 115 V.
* **Universal Bridge** or **Full Bridge (Diode)** (Power Electronics) â€” as the diode bridge. Configure to diodes (not IGBT) if using Universal Bridge.
* **Series R** (optional small series resistance in transformer secondary, for damping).
* **Series R (or Resistive Load)** â€” the DC load resistor (R_load â‰ˆ 80.3 Î© or choose 82 Î©).
* **Capacitor (Electrolytic)** â€” use Simscape > Electrical > Specialized Power Systems > Elements > Capacitance (or the Simscape Electrical capacitor block). Set C = 4700e-6 F and add ESR (e.g., 0.05â€“0.2 Î©).
* **Voltage Measurement** (Voltages) â€” to measure capacitor voltage (Vcap).
* **Current Measurement** (Currents) â€” to measure load current (Iload) and optionally diode current / transformer secondary current.
* **Scope** (Sinks) â€” to observe waveforms.
* **Voltage Sensor** and **Current Sensor** if using Simscape physical network.

**Recommended configuration (easier):** Use *Specialized Power Systems* (SPS) blocks and connect via electrical ports. If you prefer Simscape Physical network, include Electrical Reference.

---

## 3) Exact parameter values (numerical)

* **AC Voltage Source**:

  * RMS voltage: 230 V (if block requests amplitude in RMS, set 230; if it requests peak set 230*sqrt(2) â‰ˆ 324.0 V â€” check block).
  * Frequency: 50 Hz
* **Ideal Transformer**:

  * Turns ratio: `Np:Ns = 2 : 1` (because 230/115 = 2). Many blocks ask for `Turns ratio = N1/N2 = 2.0`.
  * If block asks for primary and secondary voltages directly, set secondary to 115 V.
* **Universal Bridge**:

  * Devices: Diode
  * Number of arms: 4
  * Use ideal diodes or set forward drop `Vf â‰ˆ 1.0 V` (some Universal Bridge configurations allow specifying diode model; otherwise place series voltage source to emulate Vf).
* **Capacitor**:

  * C = `4700e-6` F (4700 Î¼F)
  * ESR: `0.1` Î© (recommended to account for practical heating; you can try ESR = 0 for ideal case)
  * Voltage rating: not a Simulink parameter effect, but note physically 200â€“250 V.
* **Load resistor**:

  * R_load = `80.3` Î© (or 82 Î©)
* **Transformer series resistance** (optional):

  * R_series_secondary = `0.5` Î© (small to limit pulse currents â€” optional)
* **Diode model specifics**:

  * If possible set `Forward voltage drop Vf = 1.0 V`, `Reverse recovery` minimal for simplicity.

---

## 4) Wiring & connection order (logical)

1. AC Voltage Source (230 V) â†’ Primary of Ideal Transformer (Np)
2. Secondary of Transformer (Ns, 115 V) â†’ Bridge AC input terminals
3. Bridge + terminal â†’ Capacitor positive
4. Bridge âˆ’ terminal â†’ Capacitor negative (circuit negative / ground)
5. Load resistor across capacitor (between + and âˆ’)
6. Place Voltage Measurement across capacitor
7. Place Current Measurement in series with load to measure Iload
8. Connect Powergui block

Make sure the model has a reference (ground) if using Simscape.

---

## 5) Running the simulation

1. Save model (e.g., `rectifier_cap_filter.slx`).
2. Run for `0.2` s. Wait until steady state (after initial charging transients).
3. On Scope: display V_Cap (voltage across capacitor) and I_Load. Set scope time-window to last 0.04 s (one mains period) to inspect steady-state ripple.

---

## 6) How to measure VDC, Vpp, ripple% and I_DC precisely (post-processing)

Prefer measuring after initial transients. Use the last `0.04` s of simulation (say from `t1 = 0.12` s to `t2 = 0.16` s).

### A) Save signals to Workspace

1. On Scope, click â€œParametersâ€ â†’ â€œLoggingâ€ and enable â€œSave data to workspaceâ€ (e.g., `Vcap_ts`, `Iload_ts`) as `timeseries`.
2. Or use `To Workspace` blocks for Vcap and Iload (save as `array` or `timeseries`).

### B) MATLAB snippet to compute metrics (run in Command Window)

Use these exact lines â€” they compute steady-state metrics from the last 0.04 s window. Replace variable names if you used different names.

```matlab
% --- names from To Workspace: Vcap_ts and Iload_ts (timeseries) ---
t = Vcap_ts.Time;
V = Vcap_ts.Data;      % column vector of voltages
I = Iload_ts.Data;     % column vector of currents

% define steady-state window: take last 0.04 s
t_end = t(end);
t_start = t_end - 0.04;       % last 40 ms (one mains cycle)
idx = find(t >= t_start);

V_ss = V(idx);
I_ss = I(idx);
t_ss = t(idx);

Vdc_meas = mean(V_ss);        % mean DC
Vpp_meas = max(V_ss) - min(V_ss); % peak-to-peak ripple
ripple_percent = (Vpp_meas / Vdc_meas) * 100;
I_dc_meas = mean(I_ss);       % average load current
P_dc_meas = Vdc_meas * I_dc_meas;

fprintf('Measured Vdc = %.3f V\\n', Vdc_meas);
fprintf('Measured Vpp = %.3f V\\n', Vpp_meas);
fprintf('Ripple = %.3f %%\\n', ripple_percent);
fprintf('Measured I_dc = %.3f A\\n', I_dc_meas);
fprintf('Measured P_dc = %.3f W\\n', P_dc_meas);
```

> Numerically, you should expect approximately:
>
> * `Vdc_meas â‰ˆ 160.6 V`
> * `Vpp_meas â‰ˆ 4.2â€“4.5 V`
> * `I_dc_meas â‰ˆ 2.0 A`

(Exact numbers depend on diode model, ESR, transformer resistance, and measurement window.)

---

## 7) What to inspect on scope (visual checklist)

* **Vcap trace**: look for the charging peaks and valley. Zoom into one cycle to measure Î”V_pp.
* **Iload trace**: should be nearly constant DC (small variations from ripple). Average â‰ˆ 2 A.
* **Diode currents** (optional): pulses near the peaks. Measure peak diode current to size IFSM and transformer surge capacity.
* **Transformer secondary voltage**: verify V_secondary RMS ~115 V under load (minor drop due to transformer regulation).

---

## 8) Diagnostics & tuning if requirements are *not* met

* If `Vpp > 6 V`:

  * Increase C (e.g., 6800 Î¼F) or reduce load current.
  * Reduce ESR of capacitor.
* If `Vdc < 160 V`:

  * Check diode drops; verify you used correct transformer turns ratio.
  * Check transformer internal resistance/regulation â€” use stronger transformer.
* If diode peak currents are too high:

  * Add small series resistance (0.1â€“1 Î©) to limit inrush.
  * Use diodes with higher IFSM rating.
* If simulation unstable:

  * Reduce max solver step size to `1e-6` or try alternate solvers (ode15s).
  * Use powergui settings: FFT, fundamental frequency 50 Hz.

---

## 9) Optional advanced measurements

* **THD / Harmonics**: Use `Powergui` â†’ FFT analysis on load current to inspect harmonics from charging pulses.
* **Transformer RMS current**: Insert current measurement in secondary and compute RMS over steady-state using MATLAB:

  ```matlab
  Irms = sqrt(mean(I_ss.^2));
  fprintf('Transformer secondary RMS current = %.3f A\\n', Irms);
  ```
* **Capacitor ripple current (I_ripple_rms)**: measure current through capacitor branch to assess capacitor heating. Compare with capacitor datasheet ripple rating.

---

## 10) Example quick checklist (run this after simulation)

* [ ] Vdc_meas between 158â€“162 V
* [ ] Vpp_meas â‰¤ 6 V
* [ ] I_dc_meas â‰ˆ 2.0 A
* [ ] Transformer secondary RMS current â‰¤ transformer rated current (4.35 A for 500 VA @115 V)
* [ ] Peak diode current < IFSM of chosen diodes
* [ ] Capacitor RMS ripple current < capacitor ripple rating

---

## 11) Practical Simulink tips & traps

* Universal Bridge: if configured with ideal diodes, you may see perfect sharp pulses; add small series resistance to avoid numerical stiffness.
* If using Simscape (physical network) blocks, remember to include **Electrical Reference** block.
* Make sure the AC source amplitude unit matches the blockâ€™s expected unit (some blocks want peak amplitude, others RMS).
* Use `To Workspace` with `timeseries` to make MATLAB post-processing easy.

---

## 12) Quick tuning example â€” change capacitor and re-run

* If `Vpp_meas â‰ˆ 8 V` with C=4700 Î¼F, try C = 6800 Î¼F â†’ expected Î”V_pp_new = I / (C * f) = 2 / (6800e-6 * 100) = 2 / 0.68 = 2.941 V.
* Plug into MATLAB snippet above to verify measured Vpp â‰ˆ 2.94 V.

(Arithmetic: 6800e-6 * 100 = 0.68; 2 / 0.68 = 2.9411764705882355 â†’ 2.941 V.)

---

## 13) Short quiz (to test your simulation mastery) â“

1. What simulation time window should you use to measure steady-state ripple for a 50 Hz mains full-wave rectifier?
   (a) Last 10 ms  (b) Last 20 ms  (c) Last 40 ms  (d) Last 100 ms

2. If measured Vpp = 4.26 V and Vdc = 160.6 V, what is ripple percent (rounded to 3 decimals)?
   Use formula: ripple% = (Vpp / Vdc) * 100

3. If your capacitor ESR is increased, what happens to: (i) Vpp and (ii) capacitor heating?

4. Which signal shows narrow pulses near peaks: (a) Vcap (b) Iload (c) diode current (d) transformer primary voltage

---

## 14) Solutions to quiz âœ…

1. **(c) Last 40 ms.** Explanation: Full-wave charging frequency is 100 Hz â†’ period = 10 ms. Taking many samples over one mains cycle (40 ms = 2 mains cycles) gives stable steady-state window; commonly last 40 ms is used (one mains cycle = 20 ms? careful: mains 50 Hz â†’ period 20 ms; full-wave pulses at 100 Hz â†’ 10 ms. Using 40 ms gives multiple cycles for averaging).
2. Compute step by step:

   * Vpp = 4.26 V
   * Vdc = 160.6 V
   * ripple% = (4.26 / 160.6) * 100

     * 4.26 / 160.6 = 0.026532... â†’ Ã—100 = 2.653%
   * So **â‰ˆ 2.653%**
3. (i) Vpp increases slightly because ESR causes additional voltage drop during pulse currents; (ii) capacitor heating increases due to I_ripple_rms Ã— ESR causing dissipation.
4. **(c) diode current.** Explanation: Charging pulses flow only when rectified peaks exceed capacitor voltage, so diodes conduct in short pulses.

---

